<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>One Of My Memory Barrier Questions - 一个架构士的思考与沉</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="王福强的博客， 一个架构士的思考与沉淀">
    <meta name="keywords" content="architecture, book author, thinker, fighter, 架构, 思考, 技术, 武术, 哲学">
    <meta name="author" content="王福强">
    <link rel="stylesheet" href="/ivy.css">
    <link rel="shortcut icon" href="/favicon.ico"/>
    <style type="text/css">code{white-space: pre;}</style>
            <!-- 百度统计 -->
    <script>
      var _hmt = _hmt || [];
      (function() {
          var hm = document.createElement("script");
          hm.src = "//hm.baidu.com/hm.js?4b0cf57d9b677da796218f27d72dbbca";
          var s = document.getElementsByTagName("script")[0];
          s.parentNode.insertBefore(hm, s);
      })();
    </script>
  </head>

  <body class="node homepage">

    <header class="masthead">
      <h1><a href="/">扶墙老师说</a></h1>
      <p class="tagline">
         一个架构士的思考与沉淀
          <img src="/images/wechat-qrcode-footer.png"/>
          扶墙老师，辨证施“知”
      </p>
      
      <nav class="menu">
        <input id="menu-check" type="checkbox"/>
        <label id="menu-label" for="menu-check" class="unselectable">
          <span class="icon close-icon">✕</span>
          <span class="icon open-icon">☰</span>
          <span class="text">展开</span>
        </label>
        <ul>
          <li class="nav-item"><a class="nav-link" href="https://www.keevol.com">福强科技</a></li>
            <li class="nav-item"><a class="nav-link" href="/whoami.html">我是何人</a></li>
            <li class="nav-item"><a class="nav-link" href="/books.html">我的著作</a></li>
            <li class="nav-item"><a class="nav-link" href="/favorite.html">我的收藏</a></li>
            <li class="nav-item"><a class="nav-link" href="/dashboard.html">金融看板</a></li>
            <li class="nav-item"><a class="nav-link" href="/columns.html">专栏文章</a></li>
            <li class="nav-item"><a class="nav-link" href="/references.html">快捷参考</a></li>
            <li class="nav-item"><a class="nav-link" href="/feeds.xml">RSS订阅</a></li>
        </ul>
      </nav>
    </header>

    <article class="main">
      
<div class="row">
<div id="header">
<p class="lead">
<h1 class="title">One Of My Memory Barrier Questions</h1>
<small>
<h3 class="author">fujohnwang</h3>
</small>
<h4 class="date">2011-10-26 One Of My Memory Barrier Questions</h4>
</p>
</div>

<hr>


<p>As JSR133’s <strong>volatile</strong> semantic description after Java5, I now get a better understanding of <strong>volatile</strong>’s half memory barrier feature.</p>
<p>Simple words: &gt; If thread1 update a volatile variable and thread2 read the same volatile variable, then thread2 will also read the updates the thread1 did to other variables.</p>
<p>I don’t know whether my words are correct, let’s assume that’s the thing it is, so that I can continue with the question description.</p>
<p>Let’s say we have multiple writer threads and multiple reader threads, the writer thread will update several variables and a following volatile variable, and the reader will read the same volatile variable, then read other variables’s values, the question is, will the reader also read the updates done by all of earlier writer threads at its time point?</p>
<p>Here is a picture I draft to describe the scenario:</p>
<p><img src="images/mmbarrior/MemoryBarrierQuestion.png"/></p>
<br> And A sample code gist:
<script src="https://gist.github.com/1315137.js"> </script>
<p>If At Time Point 2 A reader thread can read all of the updates done by writer thread2, then will it also read all of the updates done by writer thread1 at time point 2 too? If so, what about time point3, 4, 5, etc…</p>
<p>My understanding is, that answer is Yes. But I am not so sure.</p>
    
    <hr>
    <img src="/images/mp_footer.jpeg">
    </article>
    

  </body>
</html>
